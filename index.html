<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control de Comandas</title>
  
  <!-- Estilos CSS -->
  <style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f9;
    }
    
    /* Estilos del formulario de inicio de sesión */
    #login-form {
        display: block;
        text-align: center;
        margin-top: 100px;
    }
    
    #login-form input {
        padding: 10px;
        font-size: 16px;
        margin: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        width: 200px;
    }
    
    #login-form button {
        padding: 10px 20px;
        font-size: 16px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    
    #login-form button:hover {
        background-color: #45a049;
    }
    
    /* Estilos de la sección de comandas */
    #comandas {
        margin: 20px;
        display: none;
    }

    h3 {
        color: #333;
    }

    #comandas-list {
        margin-top: 20px;
    }
    
    #comandas div {
        background-color: #fff;
        border: 1px solid #ccc;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 5px;
    }

    #comandas div h3 {
        color: #444;
    }

    #comandas div p {
        font-size: 16px;
        color: #555;
    }

    button {
        padding: 8px 16px;
        font-size: 14px;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 10px;
    }

    .btn-danger {
        background-color: #e74c3c;
        color: white;
        border: none;
    }

    .btn-danger:hover {
        background-color: #c0392b;
    }

    .btn-success {
        background-color: #2ecc71;
        color: white;
        border: none;
    }

    .btn-success:hover {
        background-color: #27ae60;
    }

    /* Estilos para el teclado numérico */
    input[type="number"] {
        -moz-appearance: textfield;
        -webkit-appearance: none;
        padding: 8px;
        font-size: 16px;
    }

    /* Evitar zoom en dispositivos móviles */
    input[type="number"], input[type="text"], input[type="password"] {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        font-size: 16px;
    }

    /* Estilos para la tabla de cantidades */
    .quantity-input {
        width: 60px;
        padding: 5px;
        text-align: center;
        border-radius: 4px;
        border: 1px solid #ccc;
    }

    /* Ajustes para pantallas pequeñas */
    @media (max-width: 600px) {
        body {
            font-size: 14px;
        }

        #login-form input, #login-form button {
            width: 100%;
            margin: 5px 0;
        }

        #comandas-list {
            margin-left: 10px;
            margin-right: 10px;
        }
    }
  </style>
</head>
<body>

  <!-- Formulario de inicio de sesión -->
  <div id="login-form">
    <h2>Iniciar sesión</h2>
    <input type="text" id="username" placeholder="Usuario" required>
    <input type="password" id="password" placeholder="Contraseña" required>
    <button onclick="iniciarSesion()">Iniciar sesión</button>
    <p id="login-error" style="color: red; display: none;">Usuario o contraseña incorrectos</p>
  </div>

  <!-- Sección de comandas (oculta hasta iniciar sesión) -->
  <div id="comandas">
    <h3>Control de Comandas</h3>

    <!-- Tabla de platos -->
    <table>
      <thead>
        <tr>
          <th>Plato</th>
          <th>Precio</th>
          <th>Cantidad</th>
        </tr>
      </thead>
      <tbody id="menu"></tbody>
    </table>

    <div>
      <button class="btn-success" onclick="guardarComanda()">Guardar Comanda</button>
      <button class="btn-danger" onclick="eliminarTodasLasComandas()">Eliminar Todas las Comandas</button>
    </div>

    <h3>Comandas Actuales</h3>
    <div id="comandas-list"></div>
  </div>

  <!-- Scripts -->
  <script>
    // Datos de ejemplo de platos
    const platos = [
      { nombre: "Alitas", precio: 9 },
      { nombre: "Rabas", precio: 9 },
      { nombre: "Aros de Cebolla", precio: 9 },
      { nombre: "Queso Cheddar", precio: 9 },
      { nombre: "Croquetas", precio: 9 },
      { nombre: "Burger de Pollo", precio: 9 },
      { nombre: "Patatas Fritas", precio: 5 },
      { nombre: "Pizza BBQ", precio: 10 },
      { nombre: "Pizza Pepperoni", precio: 10 },
      { nombre: "Pizza Salami", precio: 10 },
      { nombre: "Pizza 4 Quesos", precio: 10 }
    ];

    const menu = document.getElementById("menu");
    const comandasList = document.getElementById("comandas-list");
    const totalElement = document.getElementById("total");
    const loginForm = document.getElementById("login-form");
    const comandasSection = document.getElementById("comandas");

    // Cargar menú
    platos.forEach((plato, index) => {
      const fila = document.createElement("tr");
      fila.innerHTML = `
        <td>${plato.nombre}</td>
        <td>${plato.precio.toFixed(2)} €</td>
        <td><input class="quantity-input" type="number" id="cantidad-${index}" value="0" min="0" onchange="calcularTotal()"></td>
      `;
      menu.appendChild(fila);
    });

    // Función de login
    function iniciarSesion() {
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;
      const loginError = document.getElementById("login-error");

      if (username === "saydo" && password === "saydo") {
        loginForm.style.display = "none";
        comandasSection.style.display = "block";
        loginError.style.display = "none";
      } else {
        loginError.style.display = "block";
      }
    }

    // Calcular el total de la comanda
    function calcularTotal() {
      let total = 0;
      platos.forEach((plato, index) => {
        const cantidadInput = document.getElementById(`cantidad-${index}`);
        const cantidad = parseInt(cantidadInput.value) || 0;
        total += cantidad * plato.precio;
      });
      totalElement.textContent = total.toFixed(2) + " €";
    }

    // Guardar la comanda
    function guardarComanda() {
      const platosSeleccionados = [];
      let totalComanda = 0;

      platos.forEach((plato, index) => {
        const cantidad = parseInt(document.getElementById(`cantidad-${index}`).value) || 0;
        if (cantidad > 0) {
          platosSeleccionados.push({ nombre: plato.nombre, cantidad, precio: plato.precio });
          totalComanda += cantidad * plato.precio;
        }
      });

      if (platosSeleccionados.length > 0) {
        const nuevaComanda = { id: Date.now(), platos: platosSeleccionados, total: totalComanda };
        // Aquí, normalmente se enviaría la comanda al backend
        agregarComanda(nuevaComanda);
        resetCantidades();
      } else {
        alert("Por favor, selecciona al menos un plato.");
      }
    }

    // Mostrar la comanda en la lista
    function agregarComanda(comanda) {
      const comandaDiv = document.createElement("div");
      comandaDiv.innerHTML = `
        <h4>Comanda ${comanda.id}</h4>
        ${comanda.platos.map(plato => `
          <p><strong>${plato.nombre}</strong> - ${plato.cantidad} x ${plato.precio.toFixed(2)} € = ${(plato.cantidad * plato.precio).toFixed(2)} €</p>
        `).join("")}
        <p><strong>Total:</strong> ${comanda.total.toFixed(2)} €</p>
        <button class="btn-danger" onclick="eliminarComanda(${comanda.id})">Eliminar Comanda</button>
      `;
      comandasList.appendChild(comandaDiv);
    }

    // Eliminar una comanda
    function eliminarComanda(id) {
      const comandaDiv = document.querySelector(`#comandas-list div h4:contains('Comanda ${id}')`).parentNode;
      comandasList.removeChild(comandaDiv);
    }

    // Eliminar todas las comandas
    function eliminarTodasLasComandas() {
      comandasList.innerHTML = "";
    }

    // Reiniciar cantidades
    function resetCantidades() {
      platos.forEach((plato, index) => {
        document.getElementById(`cantidad-${index}`).value = 0;
      });
    }
  </script>
</body>
</html>