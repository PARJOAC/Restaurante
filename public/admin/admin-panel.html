<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Panel de Administración</title>
    <link rel="stylesheet" href="/css/general.css" />
    <link rel="stylesheet" href="/admin/admin-panel.css" />
  </head>
  <body>
    <button class="sidebar-toggle" id="toggleSidebar">☰ Menú</button>
    <div class="admin-container">
      <nav class="sidebar">
        <h2>Admin</h2>
        <ul>
          <li data-section="platos" class="active">Platos</li>
          <li data-section="categorias">Categorías</li>
          <li data-section="comandas">Comandas</li>
          <li data-section="camareros">Camareros</li>
          <li data-section="cocineros">Cocineros</li>
          <li data-section="config">Configuración</li>
        </ul>
        <button id="logout" class="btn logout">Cerrar sesión</button>
      </nav>

      <main class="content">
        <!-- Sección Platos -->
        <section id="platos" class="panel-section active">
          <h2>Gestión de Platos</h2>

          <div class="platos-layout">
            <!-- Columna izquierda: formulario + filtros -->
            <div class="lado-izquierdo">
              <form id="plato-form">
                <input name="id" type="hidden" />
                <input name="nombre" placeholder="Nombre" required />
                <input
                  name="precio"
                  type="number"
                  step="0.01"
                  min="0"
                  placeholder="Precio"
                  required
                />
                <input name="imagen" placeholder="URL imagen" />
                <input name="descripcion" placeholder="Descripción" />
                <select name="categoria">
                  <option value="" disabled selected>
                    Selecciona categoría
                  </option>
                </select>
                <button type="submit" class="btn">Guardar plato</button>
              </form>

              <div class="filtros">
                <label for="filtro-nombre">Buscar por nombre:</label>
                <input
                  type="text"
                  id="filtro-nombre"
                  placeholder="Ej: Paella, Tortilla..."
                />

                <label for="filtro-categoria">Buscar por categoría:</label>
                <select id="filtro-categoria">
                  <option value="">Todas las categorías</option>
                </select>

                <label for="ordenar-por">Ordenar por:</label>
                <select id="ordenar-por">
                  <option value="nombre">Nombre A-Z</option>
                  <option value="categoria">Categoría</option>
                  <option value="precio">Precio</option>
                </select>
              </div>
            </div>

            <!-- Columna derecha: tabla -->
            <div class="lado-derecho">
              <div class="table-wrapper">
                <table>
                  <thead>
                    <tr>
                      <th>Imagen</th>
                      <th>Nombre</th>
                      <th>Precio</th>
                      <th>Categoría</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody id="platos-body"></tbody>
                </table>
              </div>
            </div>
          </div>
        </section>

        <!-- Sección Categorías -->
        <section id="categorias" class="panel-section">
          <h2>Gestión de Categorías</h2>
          <div class="form-grid">
            <form id="categoria-form">
              <input name="id" type="hidden" />
              <input
                name="nombre"
                placeholder="Nombre de la categoría"
                required
              />
              <button type="submit" class="btn">Guardar categoría</button>
            </form>
            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>Nombre</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="categorias-body"></tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Sección Comandas -->
        <section id="comandas" class="panel-section">
          <h2>Comandas Recientes</h2>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Mesa</th>
                  <th>Fecha</th>
                  <th>Total €</th>
                  <th>Detalles</th>
                </tr>
              </thead>
              <tbody id="comandas-body"></tbody>
            </table>
          </div>
        </section>

        <!-- Sección Camareros -->
        <section id="camareros" class="panel-section">
          <h2>Gestión de Camareros</h2>
          <div class="form-grid">
            <form id="camarero-form">
              <input name="usuario" placeholder="Usuario" required />
              <input
                name="contraseña"
                type="password"
                placeholder="Contraseña"
                required
              />
              <button type="submit" class="btn">Crear Camarero</button>
            </form>

            <table>
              <thead>
                <tr>
                  <th>Usuario</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="camareros-body"></tbody>
            </table>
          </div>
        </section>

        <!-- Sección Cocineros -->
        <section id="cocineros" class="panel-section">
          <h2>Gestión de Cocineros</h2>
          <div class="form-grid">
            <form id="cocinero-form">
              <input name="usuario" placeholder="Usuario" required />
              <input
                name="contraseña"
                type="password"
                placeholder="Contraseña"
                required
              />
              <button type="submit" class="btn">Crear Cocinero</button>
            </form>
            <table>
              <thead>
                <tr>
                  <th>Usuario</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="cocineros-body"></tbody>
            </table>
          </div>
        </section>

        <!-- Sección Configuración -->
        <section id="config" class="panel-section">
          <h2>Cambiar Contraseña</h2>
          <form id="pwd-form" class="config-form">
            <label for="current-password">Contraseña actual</label>
            <input
              type="password"
              id="current-password"
              name="current"
              required
            />

            <label for="new-password">Nueva contraseña</label>
            <input type="password" id="new-password" name="new" required />

            <label for="confirm-password">Confirmar nueva contraseña</label>
            <input
              type="password"
              id="confirm-password"
              name="confirm"
              required
            />

            <button type="submit" class="btn">Actualizar contraseña</button>
            <p id="pwd-msg" class="config-msg"></p>
          </form>
        </section>
      </main>
    </div>

    <div id="modal-comanda" class="modal-overlay hidden">
      <div class="modal-wrapper">
        <div class="modal-header">
          <h2 class="modal-title">Detalle Comanda</h2>
          <button class="close-modal-btn" id="modal-close">&times;</button>
        </div>
        <div class="modal-body"></div>
      </div>
    </div>

    <script src="/admin/admin-panel.js"></script>
    <script>
      const sidebar = document.querySelector(".sidebar");
      const toggleBtn = document.getElementById("toggleSidebar");

      toggleBtn.addEventListener("click", () => {
        sidebar.classList.toggle("open");
        document.body.classList.toggle("sidebar-open");
      });

      document.querySelectorAll(".sidebar ul li").forEach((li) => {
        li.addEventListener("click", () => {
          sidebar.classList.remove("open");
          document.body.classList.remove("sidebar-open");
        });
      });
    </script>
  </body>
</html>
